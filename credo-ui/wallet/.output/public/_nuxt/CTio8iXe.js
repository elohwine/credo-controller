import{_ as H}from"./D1tweDYs.js";import{_ as D}from"./B1tiX-i8.js";import{V as E}from"./BJxc1Al6.js";import{_ as $,j as N,e as A,p as L,i as w,G as B,J as M,c as i,a as t,A as C,b as r,f as O,F as h,r as b,g as n,w as p,K as S,L as j,o,t as _,d as Z}from"#entry";import"./D-q_bWm-.js";import"./DGaPg-gW.js";import"./BAsolvdk.js";import"./T9KXbXrp.js";import"./BtARrWM9.js";const G="data:image/svg+xml,%3csvg%20width='24'%20height='21'%20viewBox='0%200%2024%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.3846%2019.0809C20.2343%2019.0809%2020.9231%2018.4135%2020.9231%2017.5902V15.2052C20.9231%2014.7111%2021.3364%2014.3108%2021.8462%2014.3108C22.356%2014.3108%2022.7693%2014.7111%2022.7693%2015.2052V17.5902C22.7693%2019.4015%2021.254%2020.8697%2019.3846%2020.8697H16.9232C16.4133%2020.8697%2016%2020.4693%2016%2019.9754C16%2019.4813%2016.4133%2019.0809%2016.9232%2019.0809H19.3846Z'%20fill='%23E6F6FF'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.3846%201.78882C20.2343%201.78882%2020.9231%202.45622%2020.9231%203.2795V5.66459C20.9231%206.15856%2021.3364%206.559%2021.8462%206.559C22.356%206.559%2022.7693%206.15856%2022.7693%205.66459V3.2795C22.7693%201.46828%2021.254%200%2019.3846%200H16.9232C16.4133%200%2016%200.400441%2016%200.894412C16%201.38838%2016.4133%201.78882%2016.9232%201.78882H19.3846Z'%20fill='%23E6F6FF'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.61117%2019.0809C3.76151%2019.0809%203.07271%2018.4135%203.07271%2017.5902V15.2052C3.07271%2014.7111%202.65945%2014.3108%202.14964%2014.3108C1.63984%2014.3108%201.22656%2014.7111%201.22656%2015.2052V17.5902C1.22656%2019.4015%202.74191%2020.8697%204.61117%2020.8697H7.07272C7.58252%2020.8697%207.9958%2020.4693%207.9958%2019.9754C7.9958%2019.4813%207.58252%2019.0809%207.07272%2019.0809H4.61117Z'%20fill='%23E6F6FF'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.61117%201.78882C3.76151%201.78882%203.07271%202.45622%203.07271%203.2795V5.6646C3.07271%206.15856%202.65945%206.559%202.14964%206.559C1.63984%206.559%201.22656%206.15856%201.22656%205.6646V3.2795C1.22656%201.46829%202.74191%200%204.61117%200H7.07272C7.58252%200%207.9958%200.400441%207.9958%200.894412C7.9958%201.38838%207.58252%201.78882%207.07272%201.78882H4.61117Z'%20fill='%23E6F6FF'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M24%2010.4347C24%2010.9286%2023.5867%2011.329%2023.077%2011.329H0.923076C0.41328%2011.329%200%2010.9286%200%2010.4347C0%209.94075%200.41328%209.54028%200.923076%209.54028H23.077C23.5867%209.54028%2024%209.94075%2024%2010.4347Z'%20fill='%23E6F6FF'/%3e%3c/svg%3e",R=window.setInterval,U={class:"flex flex-col min-h-screen bg-gray-50/50"},P={class:"px-4 pb-20 sm:px-6 lg:px-8 max-w-3xl mx-auto w-full"},T={key:0,class:"mb-8"},J={class:"grid grid-cols-1 gap-4"},z={class:"flex items-center justify-between"},K={class:"text-md font-bold text-[#0F3F5E]"},Q={class:"text-sm text-[#627D98]"},Y=["onClick","disabled"],q={key:1},W={role:"list",class:"space-y-4"},X={key:3,class:"h-full flex flex-col items-center justify-center"},ee={key:0,class:"fixed bottom-20 right-5 sm:hidden"},te={class:"flex items-center justify-center h-14 w-14 rounded-full bg-black text-white shadow-lg hover:bg-blue-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600"},le=["src"],se={__name:"index",async setup(ne){let c,g;const u=N().params.wallet,{data:a,pending:y,refresh:F,error:ie}=([c,g]=A(()=>S(`/wallet-api/wallet/${u}/credentials?showDeleted=false&showPending=false`,{dedupe:"defer"},"$N2s-0lSB2s")),c=await c,g(),c);L(()=>a.value?a.value.find(l=>{try{const e=typeof l.document=="string"?JSON.parse(l.document):l.document;return e?.vc?.type?.includes("GenericID")||e?.type?.includes("GenericID")}catch{return!1}}):null);const d=w([]),f=w(null);let m=null;const x=async()=>{try{const l=await $fetch("/wallet-api/credentials/pending-offers",{credentials:"include"});d.value=l.offers||[]}catch(l){console.error("Failed to fetch pending offers:",l)}},k=async l=>{try{f.value=l.id,await $fetch("/wallet-api/credentials/accept-offer",{method:"POST",credentials:"include",body:{offerUri:l.offerUri}}),await F(),d.value=d.value.filter(e=>e.id!==l.id)}catch(e){console.error("Failed to accept offer:",e),alert("Failed to accept credential: "+e.message)}finally{f.value=null}};return B(()=>{x(),m=R(x,3e4)}),M(()=>{m&&clearInterval(m)}),(l,e)=>{const v=H,V=j("LoadingIndicator");return o(),i(h,null,[t("div",U,[r(D),t("div",P,[d.value&&d.value.length>0?(o(),i("div",T,[e[0]||(e[0]=t("h2",{class:"text-sm font-semibold text-[#627D98] uppercase tracking-wider mb-4 ml-1"},"Available Credentials",-1)),t("div",J,[(o(!0),i(h,null,b(d.value,s=>(o(),i("div",{key:s.id,class:"rounded-xl p-4 shadow-md bg-white border border-blue-100"},[t("div",z,[t("div",null,[t("h3",K,_(s.credentialType),1),t("p",Q,_(s.issuerName),1)]),t("button",{onClick:I=>k(s),disabled:f.value===s.id,class:"px-4 py-2 text-sm text-white font-medium rounded-lg shadow-sm hover:shadow transition-all",style:{background:"linear-gradient(135deg, #2188CA, #0F3F5E)"}},_(f.value===s.id?"...":"Accept"),9,Y)])]))),128))])])):C("",!0),n(a)&&n(a).length>0?(o(),i("div",q,[e[1]||(e[1]=t("div",{class:"flex items-center justify-between mb-4 ml-1"},[t("h2",{class:"text-sm font-semibold text-[#627D98] uppercase tracking-wider"},"Credentials")],-1)),t("ul",W,[(o(!0),i(h,null,b(n(a),(s,I)=>(o(),i("li",{key:s.id,class:"transform hover:scale-[1.01] cursor-pointer duration-200"},[r(v,{to:`/wallet/${n(u)}/credentials/`+encodeURIComponent(s.id)},{default:p(()=>[r(E,{credential:s,isDetailView:!1},null,8,["credential"])]),_:2},1032,["to"])]))),128))])])):n(y)?(o(),O(V,{key:2},{default:p(()=>[...e[2]||(e[2]=[Z("Loading credentials...",-1)])]),_:1})):(o(),i("div",X,[e[4]||(e[4]=t("p",{class:"mt-2 text-md text-[#627D98]"}," You don't have any credentials yet! ",-1)),r(v,{to:`/wallet/${n(u)}/scan`},{default:p(()=>[...e[3]||(e[3]=[t("button",{class:"mt-8 px-5 py-2.5 text-white rounded-xl shadow-lg hover:shadow-xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#2188CA] transition-all",style:{background:"linear-gradient(135deg, #2188CA, #0F3F5E)"}}," Receive Credential ",-1)])]),_:1},8,["to"])]))])]),n(a)&&n(a).length>0?(o(),i("div",ee,[r(v,{to:`/wallet/${n(u)}/scan`},{default:p(()=>[t("button",te,[t("img",{src:n(G),alt:"Scan QR code",class:"h-6 w-6"},null,8,le)])]),_:1},8,["to"])])):C("",!0)],64)}}},he=$(se,[["__scopeId","data-v-ac9aeafe"]]);export{he as default};
