import{_ as ue}from"./Dv7n7eYI.js";import{c as y,o as c,a as r,l as O,x as _,k as U,H as X,Q as Y,E as ee,F as K,T as M,R as N,K as de,U as ce,V as ve,W as pe,e as R,h as j,g as b,_ as fe,t as T,i as me,m as be,L as ge,b as I,f as xe,w as P,j as te,P as he,n as H,d as W,X as ye,r as J}from"#entry";import{C as we}from"./B-1inGnY.js";import{P as _e}from"./D_UK8ObU.js";import{r as ke}from"./WLQUZRjC.js";import Oe from"./HeSlrX1C.js";import{L as Se}from"./Dhsf9hJ5.js";import{u as Le}from"./CS6oTbIc.js";import{d as Te}from"./6yF6Fmpd.js";import{g as $e}from"./_2w5uKZz.js";import{d as Ce}from"./D75GOWRg.js";import{u as z,w as Re,a as De,h as Ae,o as L,t as Ie,i as Q,A as q,E as Pe,T as Me,b as G,c as k,l as Ve,N as le,O as Be}from"./BPIeaWuc.js";import{f as Ee,c as $,s as je,p as Ne,u as ze}from"./BmPIz8FQ.js";import{f as Ue,u as Ze}from"./CGgIvBRH.js";function qe(t,n){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})])}function Fe(t,n){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function He(t,n){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 11.25 1.5 1.5.75-.75V8.758l2.276-.61a3 3 0 1 0-3.675-3.675l-.61 2.277H12l-.75.75 1.5 1.5M15 11.25l-8.47 8.47c-.34.34-.8.53-1.28.53s-.94.19-1.28.53l-.97.97-.75-.75.97-.97c.34-.34.53-.8.53-1.28s.19-.94.53-1.28L12.75 9M15 11.25 12.75 9"})])}function We(t,n){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"})])}function Ke(t,n){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function Qe(t,n,u){let f=O(u?.value),i=_(()=>t.value!==void 0);return[_(()=>i.value?t.value:f.value),function(m){return i.value||(f.value=m),n?.(m)}]}function oe(t={},n=null,u=[]){for(let[f,i]of Object.entries(t))se(u,ne(n,f),i);return u}function ne(t,n){return t?t+"["+n+"]":n}function se(t,n,u){if(Array.isArray(u))for(let[f,i]of u.entries())se(t,ne(n,f.toString()),i);else u instanceof Date?t.push([n,u.toISOString()]):typeof u=="boolean"?t.push([n,u?"1":"0"]):typeof u=="string"?t.push([n,u]):typeof u=="number"?t.push([n,`${u}`]):u==null?t.push([n,""]):oe(u,n,t)}function Ge(t,n){return t===n}var Je=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Je||{}),Xe=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Xe||{}),Ye=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ye||{});function et(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let ie=Symbol("ListboxContext");function F(t){let n=ve(ie,null);if(n===null){let u=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,F),u}return n}let tt=U({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ge},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:n,attrs:u,emit:f}){let i=O(1),m=O(null),e=O(null),x=O(null),p=O([]),h=O(""),w=O(null),s=O(1);function d(a=o=>o){let o=w.value!==null?p.value[w.value]:null,l=Be(a(p.value.slice()),g=>L(g.dataRef.domRef)),v=o?l.indexOf(o):null;return v===-1&&(v=null),{options:l,activeOptionIndex:v}}let V=_(()=>t.multiple?1:0),[B,D]=Qe(_(()=>t.modelValue),a=>f("update:modelValue",a),_(()=>t.defaultValue)),E=_(()=>B.value===void 0?z(V.value,{1:[],0:void 0}):B.value),C={listboxState:i,value:E,mode:V,compare(a,o){if(typeof t.by=="string"){let l=t.by;return a?.[l]===o?.[l]}return t.by(a,o)},orientation:_(()=>t.horizontal?"horizontal":"vertical"),labelRef:m,buttonRef:e,optionsRef:x,disabled:_(()=>t.disabled),options:p,searchQuery:h,activeOptionIndex:w,activationTrigger:s,closeListbox(){t.disabled||i.value!==1&&(i.value=1,w.value=null)},openListbox(){t.disabled||i.value!==0&&(i.value=0)},goToOption(a,o,l){if(t.disabled||i.value===1)return;let v=d(),g=Ee(a===$.Specific?{focus:$.Specific,id:o}:{focus:a},{resolveItems:()=>v.options,resolveActiveIndex:()=>v.activeOptionIndex,resolveId:S=>S.id,resolveDisabled:S=>S.dataRef.disabled});h.value="",w.value=g,s.value=l??1,p.value=v.options},search(a){if(t.disabled||i.value===1)return;let o=h.value!==""?0:1;h.value+=a.toLowerCase();let l=(w.value!==null?p.value.slice(w.value+o).concat(p.value.slice(0,w.value+o)):p.value).find(g=>g.dataRef.textValue.startsWith(h.value)&&!g.dataRef.disabled),v=l?p.value.indexOf(l):-1;v===-1||v===w.value||(w.value=v,s.value=1)},clearSearch(){t.disabled||i.value!==1&&h.value!==""&&(h.value="")},registerOption(a,o){let l=d(v=>[...v,{id:a,dataRef:o}]);p.value=l.options,w.value=l.activeOptionIndex},unregisterOption(a){let o=d(l=>{let v=l.findIndex(g=>g.id===a);return v!==-1&&l.splice(v,1),l});p.value=o.options,w.value=o.activeOptionIndex,s.value=1},theirOnChange(a){t.disabled||D(a)},select(a){t.disabled||D(z(V.value,{0:()=>a,1:()=>{let o=M(C.value.value).slice(),l=M(a),v=o.findIndex(g=>C.compare(l,M(g)));return v===-1?o.push(l):o.splice(v,1),o}}))}};Re([e,x],(a,o)=>{var l;C.closeListbox(),De(o,Ae.Loose)||(a.preventDefault(),(l=L(e))==null||l.focus())},_(()=>i.value===0)),pe(ie,C),Ie(_(()=>z(i.value,{0:Q.Open,1:Q.Closed})));let A=_(()=>{var a;return(a=L(e))==null?void 0:a.closest("form")});return X(()=>{Y([A],()=>{if(!A.value||t.defaultValue===void 0)return;function a(){C.theirOnChange(t.defaultValue)}return A.value.addEventListener("reset",a),()=>{var o;(o=A.value)==null||o.removeEventListener("reset",a)}},{immediate:!0})}),()=>{let{name:a,modelValue:o,disabled:l,form:v,...g}=t,S={open:i.value===0,disabled:l,value:E.value};return ee(K,[...a!=null&&E.value!=null?oe({[a]:E.value}).map(([Z,re])=>ee(Ue,Pe({features:Ze.Hidden,key:Z,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:v,disabled:l,name:Z,value:re}))):[],q({ourProps:{},theirProps:{...u,...Me(g,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:S,slots:n,attrs:u,name:"Listbox"})])}}}),lt=U({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:null}},setup(t,{attrs:n,slots:u}){var f;let i=(f=t.id)!=null?f:`headlessui-listbox-label-${G()}`,m=F("ListboxLabel");function e(){var x;(x=L(m.buttonRef))==null||x.focus({preventScroll:!0})}return()=>{let x={open:m.listboxState.value===0,disabled:m.disabled.value},{...p}=t,h={id:i,ref:m.labelRef,onClick:e};return q({ourProps:h,theirProps:p,slot:x,attrs:n,slots:u,name:"ListboxLabel"})}}}),at=U({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:n,slots:u,expose:f}){var i;let m=(i=t.id)!=null?i:`headlessui-listbox-button-${G()}`,e=F("ListboxButton");f({el:e.buttonRef,$el:e.buttonRef});function x(s){switch(s.key){case k.Space:case k.Enter:case k.ArrowDown:s.preventDefault(),e.openListbox(),N(()=>{var d;(d=L(e.optionsRef))==null||d.focus({preventScroll:!0}),e.value.value||e.goToOption($.First)});break;case k.ArrowUp:s.preventDefault(),e.openListbox(),N(()=>{var d;(d=L(e.optionsRef))==null||d.focus({preventScroll:!0}),e.value.value||e.goToOption($.Last)});break}}function p(s){switch(s.key){case k.Space:s.preventDefault();break}}function h(s){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),N(()=>{var d;return(d=L(e.buttonRef))==null?void 0:d.focus({preventScroll:!0})})):(s.preventDefault(),e.openListbox(),et(()=>{var d;return(d=L(e.optionsRef))==null?void 0:d.focus({preventScroll:!0})})))}let w=je(_(()=>({as:t.as,type:n.type})),e.buttonRef);return()=>{var s,d;let V={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{...B}=t,D={ref:e.buttonRef,id:m,type:w.value,"aria-haspopup":"listbox","aria-controls":(s=L(e.optionsRef))==null?void 0:s.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(d=L(e.labelRef))==null?void 0:d.id,m].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:x,onKeyup:p,onClick:h};return q({ourProps:D,theirProps:B,slot:V,attrs:n,slots:u,name:"ListboxButton"})}}}),ot=U({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:n,slots:u,expose:f}){var i;let m=(i=t.id)!=null?i:`headlessui-listbox-options-${G()}`,e=F("ListboxOptions"),x=O(null);f({el:e.optionsRef,$el:e.optionsRef});function p(s){switch(x.value&&clearTimeout(x.value),s.key){case k.Space:if(e.searchQuery.value!=="")return s.preventDefault(),s.stopPropagation(),e.search(s.key);case k.Enter:if(s.preventDefault(),s.stopPropagation(),e.activeOptionIndex.value!==null){let d=e.options.value[e.activeOptionIndex.value];e.select(d.dataRef.value)}e.mode.value===0&&(e.closeListbox(),N(()=>{var d;return(d=L(e.buttonRef))==null?void 0:d.focus({preventScroll:!0})}));break;case z(e.orientation.value,{vertical:k.ArrowDown,horizontal:k.ArrowRight}):return s.preventDefault(),s.stopPropagation(),e.goToOption($.Next);case z(e.orientation.value,{vertical:k.ArrowUp,horizontal:k.ArrowLeft}):return s.preventDefault(),s.stopPropagation(),e.goToOption($.Previous);case k.Home:case k.PageUp:return s.preventDefault(),s.stopPropagation(),e.goToOption($.First);case k.End:case k.PageDown:return s.preventDefault(),s.stopPropagation(),e.goToOption($.Last);case k.Escape:s.preventDefault(),s.stopPropagation(),e.closeListbox(),N(()=>{var d;return(d=L(e.buttonRef))==null?void 0:d.focus({preventScroll:!0})});break;case k.Tab:s.preventDefault(),s.stopPropagation();break;default:s.key.length===1&&(e.search(s.key),x.value=setTimeout(()=>e.clearSearch(),350));break}}let h=Ve(),w=_(()=>h!==null?(h.value&Q.Open)===Q.Open:e.listboxState.value===0);return()=>{var s,d;let V={open:e.listboxState.value===0},{...B}=t,D={"aria-activedescendant":e.activeOptionIndex.value===null||(s=e.options.value[e.activeOptionIndex.value])==null?void 0:s.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(d=L(e.buttonRef))==null?void 0:d.id,"aria-orientation":e.orientation.value,id:m,onKeydown:p,role:"listbox",tabIndex:0,ref:e.optionsRef};return q({ourProps:D,theirProps:B,slot:V,attrs:n,slots:u,features:le.RenderStrategy|le.Static,visible:w.value,name:"ListboxOptions"})}}}),nt=U({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:n,attrs:u,expose:f}){var i;let m=(i=t.id)!=null?i:`headlessui-listbox-option-${G()}`,e=F("ListboxOption"),x=O(null);f({el:x,$el:x});let p=_(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===m:!1),h=_(()=>z(e.mode.value,{0:()=>e.compare(M(e.value.value),M(t.value)),1:()=>M(e.value.value).some(a=>e.compare(M(a),M(t.value)))})),w=_(()=>z(e.mode.value,{1:()=>{var a;let o=M(e.value.value);return((a=e.options.value.find(l=>o.some(v=>e.compare(M(v),M(l.dataRef.value)))))==null?void 0:a.id)===m},0:()=>h.value})),s=Ne(x),d=_(()=>({disabled:t.disabled,value:t.value,get textValue(){return s()},domRef:x}));X(()=>e.registerOption(m,d)),de(()=>e.unregisterOption(m)),X(()=>{Y([e.listboxState,h],()=>{e.listboxState.value===0&&h.value&&z(e.mode.value,{1:()=>{w.value&&e.goToOption($.Specific,m)},0:()=>{e.goToOption($.Specific,m)}})},{immediate:!0})}),ce(()=>{e.listboxState.value===0&&p.value&&e.activationTrigger.value!==0&&N(()=>{var a,o;return(o=(a=L(x))==null?void 0:a.scrollIntoView)==null?void 0:o.call(a,{block:"nearest"})})});function V(a){if(t.disabled)return a.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),N(()=>{var o;return(o=L(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}))}function B(){if(t.disabled)return e.goToOption($.Nothing);e.goToOption($.Specific,m)}let D=ze();function E(a){D.update(a)}function C(a){D.wasMoved(a)&&(t.disabled||p.value||e.goToOption($.Specific,m,0))}function A(a){D.wasMoved(a)&&(t.disabled||p.value&&e.goToOption($.Nothing))}return()=>{let{disabled:a}=t,o={active:p.value,selected:h.value,disabled:a},{value:l,disabled:v,...g}=t,S={id:m,ref:x,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":h.value,disabled:void 0,onClick:V,onFocus:B,onPointerenter:E,onMouseenter:E,onPointermove:C,onMousemove:C,onPointerleave:A,onMouseleave:A};return q({ourProps:S,theirProps:g,slot:o,attrs:u,slots:n,name:"ListboxOption"})}}});const st={__name:"CredentialIcon",props:["credentialType"],setup(t){return(n,u)=>t.credentialType==="VerifiableDiploma"?(c(),R(b(qe),{key:0})):["VerifiableId","Europass","MyID"].includes(t.credentialType)?(c(),R(b(We),{key:1})):t.credentialType==="ProofOfResidence"?(c(),R(b(ke),{key:2})):t.credentialType==="ParticipantCredential"?(c(),R(b(Ke),{key:3})):t.credentialType==="OpenBadgeCredential"?(c(),R(b(Fe),{key:4})):t.credentialType==="VerifiableVaccinationCertificate"?(c(),R(b(He),{key:5})):j("",!0)}},it={},rt={class:"inline-flex items-center font-semibold leading-6 text-sm"};function ut(t,n){return c(),y("div",rt,[...n[0]||(n[0]=[r("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})],-1)])])}const dt=fe(it,[["render",ut]]),ct=["disabled"],vt={key:3},pt={key:4},ae={__name:"ActionButton",props:["handler","icon","failedIcon","failed","displayText","actionText"],emits:["click"],setup(t,{emit:n}){const u=n,f=t,i=O(!1);function m(){i.value=!0,u("click")}return(e,x)=>{const p=Oe;return c(),y("button",{disabled:b(i),class:"",onClick:m},[t.failed?(c(),R(p,{key:0,class:"h-5 w-5 mr-1",name:"heroicons:exclamation-circle"})):b(i)?b(i)?(c(),R(dt,{key:2,class:"h-5 w-5 pr-2"})):j("",!0):(c(),R(p,{key:1,name:t.icon,class:"h-5 w-5 mr-1"},null,8,["name"])),b(i)?(c(),y("span",pt,T(f.actionText??f.displayText),1)):(c(),y("span",vt,T(f.displayText),1))],8,ct)}}};function ft(t,n){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function mt(t,n){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}const bt={class:"ml-3"},gt={class:"underline"},xt={class:"group flex"},ht={key:0,class:"group-hover:opacity-100 transition-opacity bg-gray-800 px-1 text-sm text-gray-100 rounded-md absolute -translate-x-1/2 opacity-0 m-4 mx-auto"},yt={class:"flex col-2"},wt={key:0,class:"relative w-full"},_t={class:"relative mt-2"},kt={class:"flex items-center"},Ot={class:"truncate font-bold"},St={class:"ml-3 block truncate"},Lt={class:"pointer-events-none absolute inset-y-0 right-0 ml-3 flex items-center pr-2"},Tt={class:"flex items-center"},$t={class:"italic"},Ct={class:"rounded-md bg-blue-50 p-2 mt-2"},Rt={class:"flex"},Dt={class:"ml-3 flex-1 flex flex-col md:flex-row md:justify-between"},At={key:0,class:"text-sm text-blue-700 max-w-xs overflow-x-scroll mr-3 truncate"},It={class:"text-sm md:ml-6"},Pt={"aria-label":"Credential list",class:"h-full overflow-y-auto shadow-xl"},Mt={class:"top-0 z-10 border-y border-b-gray-200 border-t-gray-100 bg-gray-50 px-3 py-1.5 text-sm font-semibold leading-6 text-gray-900"},Vt={class:"divide-y divide-gray-100",role:"list"},Bt={class:"flex min-w-0 flex-row items-center"},Et={class:"text-lg font-semibold leading-6 text-gray-900"},jt={class:"ml-1 truncate text-sm leading-5 text-gray-800"},el=U({__name:"issuance",async setup(t){let n,u;const f=Le(),{data:i,pending:m}=([n,u]=me(()=>he(()=>$fetch(`/wallet-api/wallet/${f.value}/dids`),"$pEx2-YTCGy")),n=await n,u(),n),e=O(null);Y(i,async o=>{await N();const l=o?.find(v=>v.default==!0)??o[0]??null;console.log("Setting new DID: "+l),e.value=l});const x=be().query,p=Te(x.request);console.log("Issuance -> Using request: ",p);const h=O(!1);console.log("Making issuanceUrl...");const w=new URL(p);console.log("issuanceUrl: ",w);const{data:s}=ge(`/wallet-api/wallet/${f.value}/manifest/extract?offer=${p}`,"$bamVE_0Eyq"),d=_(()=>s.value?.display?s.value.display.card.issuedBy:"n/a");console.log("Issuer host:",d);let B=[_(()=>s.value?.display?s.value.display.card.title:"n/a")],D=0;const E=$e(B.map(o=>({id:++D,name:o})),o=>o.name),C=O(!1),A=O("Unknown error occurred.");async function a(){const o=e.value?.did??i.value[0]?.did??null;if(o===null){console.warn("NO DID AT ACCEPTCREDENTIAL"),console.log("Selected: "+e.value),console.log("DIDs:"+i.value[0]);return}console.log("Issue to: "+o);try{await $fetch(`/wallet-api/wallet/${f.value}/exchange/useOfferRequest?did=${o}`,{method:"POST",body:p}),te(`/wallet/${f.value}`)}catch(l){C.value=!0;let v=l?.data.startsWith("{")?JSON.parse(l.data):l.data??l;throw v=v?.message??v,A.value=v,console.log("Error: ",l?.data),alert("Error occurred while trying to receive credential: "+A.value),l}}return x.accept&&(h.value=!0,a()),Ce("Claim credentials - Credentis"),(o,l)=>{const v=ue;return c(),y("div",null,[I(_e,null,xe({title:P(()=>[r("div",bt,[l[3]||(l[3]=r("h1",{class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:leading-9"}," Receive entra credentials ",-1)),r("p",null,[l[2]||(l[2]=W(" issued by ",-1)),r("span",gt,T(b(d)),1)])])]),_:2},[h.value?void 0:{name:"menu",fn:P(()=>[I(ae,{class:"inline-flex items-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:scale-105 hover:animate-pulse hover:bg-red-700 focus:animate-none focus:outline focus:outline-offset-2 focus:outline-red-700","display-text":"Reject",icon:"heroicons:x-mark",type:"button",onClick:l[0]||(l[0]=g=>("navigateTo"in o?o.navigateTo:b(te))(`/wallet/${b(f)}`))}),r("div",xt,[I(ae,{class:H([[C.value?"animate-pulse bg-red-600 hover:scale-105 hover:bg-red-700 focus:outline focus:outline-offset-2 focus:outline-red-700":"bg-green-600 hover:scale-105 hover:animate-pulse hover:bg-green-700 focus:animate-none focus:outline-green-700"],"inline-flex items-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm focus:outline focus:outline-offset-2 disabled:bg-gray-200 disabled:cursor-not-allowed"]),disabled:(e.value===null||e.value===void 0)&&!(b(i)&&b(i)?.length===1),failed:C.value,"display-text":"Accept",icon:"heroicons:check",type:"button",onClick:a},null,8,["class","disabled","failed"]),C.value?(c(),y("span",ht,T(A.value),1)):j("",!0)])]),key:"0"}]),1024),I(we,null,{default:P(()=>[l[8]||(l[8]=r("h1",{class:"mb-2 text-2xl font-semibold"},"Issuance",-1)),h.value?(c(),R(Se,{key:0,class:"my-6 mb-12 w-full"},{default:P(()=>[W(" Receiving "+T(o.credentialCount)+" credential(s)... ",1)]),_:1})):j("",!0),r("div",yt,[b(m)?j("",!0):(c(),y("div",wt,[b(i)?.length!==1?(c(),R(b(tt),{key:0,modelValue:e.value,"onUpdate:modelValue":l[1]||(l[1]=g=>e.value=g),as:"div"},{default:P(()=>[I(b(lt),{class:"block text-sm font-medium leading-6 text-gray-900"},{default:P(()=>[...l[4]||(l[4]=[W("Select DID: ",-1)])]),_:1}),r("div",_t,[e.value!==null?(c(),R(b(at),{key:0,class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-sm sm:leading-6 h-9"},{default:P(()=>[r("span",kt,[r("p",Ot,T(e.value?.alias),1),r("span",St,T(e.value?.did),1)]),r("span",Lt,[I(b(mt),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1})):j("",!0),I(ye,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:P(()=>[I(b(ot),{class:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:P(()=>[(c(!0),y(K,null,J(b(i),g=>(c(),R(b(nt),{key:g?.did,value:g,as:"template"},{default:P(({active:S,selectedDid:Z})=>[r("li",{class:H([S?"bg-indigo-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[r("div",Tt,[r("p",$t,T(g.alias),1),r("span",{class:H([Z?"font-semibold":"font-normal","ml-3 block truncate"])},T(g.did),3)]),Z?(c(),y("span",{key:0,class:H([S?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[I(b(ft),{"aria-hidden":"true",class:"h-5 w-5"})],2)):j("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])):j("",!0),r("div",Ct,[r("div",Rt,[r("div",Dt,[e.value!=null?(c(),y("span",At," Will issue to DID: "+T(e.value.alias)+" ("+T(e.value.did)+") ",1)):j("",!0),r("button",It,[I(v,{to:`/wallet/${b(f)}/settings/dids`,class:"whitespace-nowrap font-medium text-blue-700 hover:text-blue-600"},{default:P(()=>[...l[5]||(l[5]=[W(" DID management ",-1),r("span",{"aria-hidden":"true"}," â†’",-1)])]),_:1},8,["to"])])])])]),l[6]||(l[6]=r("p",{class:"mt-10 mb-1"},"The following credentials will be issued:",-1)),r("div",Pt,[(c(!0),y(K,null,J(b(E).keys(),g=>(c(),y("div",{key:g.id,class:"relative"},[r("div",Mt,[r("h3",null,T(g.value)+"s:",1)]),r("ul",Vt,[(c(!0),y(K,null,J(b(E).get(g),S=>(c(),y("li",{key:S,class:"flex gap-x-4 px-3 py-5"},[I(st,{credentialType:S.name.value,class:"h-6 w-6 flex-none rounded-full bg-gray-50"},null,8,["credentialType"]),r("div",Bt,[r("span",Et,T(S.id)+".",1),r("span",jt,T(S.name.value),1)])]))),128))])]))),128))]),l[7]||(l[7]=r("br",null,null,-1))]))])]),_:1})])}}});export{el as default};
