import{_ as M}from"./dEyoA6Mq.js";import{u as Q,g as Z}from"./erPheUey.js";import{c as n,o as l,a as s,i as G,j as I,q as v,A as Y,h as d,b as H,t as c,F as x,B as g,r as F,_ as P}from"#entry";function W(j,u){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}const X={key:0,class:"list-card-content"},ee={class:"list-icon"},te=["src"],se={key:1,class:"h-8 w-8 flex items-center justify-center rounded-full bg-white/10"},ie={class:"list-text"},ne={class:"list-title"},le={class:"list-subtitle"},ae={class:"list-badges"},re={key:0,class:"list-verified"},oe={key:1,class:"list-expired"},ce={class:"card-header"},ue={class:"issuer-brand"},de=["src"],ve={key:1,src:M,alt:"Credentis",class:"brand-logo"},me={class:"brand-name"},pe={key:0,class:"verified-badge"},fe={key:1,class:"expired-badge"},_e={class:"card-title-section"},ye={class:"card-title"},be={class:"holder-name"},he={class:"subtitle-row"},ke={class:"issued-info"},ge={class:"type-badge"},je={key:0,class:"claims-section"},Ce={class:"claim-label"},we={class:"claim-value"},De={key:1,class:"line-items-section"},Ie={class:"item-description"},xe={class:"item-amount"},Ae={key:0,class:"total-row"},Ne={class:"total-value"},Se={key:2,class:"credential-id"},Ve=G({__name:"VerifiableCredentialCard",props:{credential:{type:Object,required:!0},showId:{type:Boolean,required:!1,default:!1},isDetailView:{type:Boolean,required:!1,default:!1}},setup(j){const u=j,{jwtJson:m,titleTitelized:T,isNotExpired:A,issuerName:C,issuerLogo:y,issuanceDate:N}=Q(I(u.credential)),f=I(u.isDetailView??!1),K=I(null),p=v(()=>m.value?Z(m.value):null),S=v(()=>{const t=p.value?.kind||"generic";return t.charAt(0).toUpperCase()+t.slice(1)}),V=v(()=>{const t=S.value;return t==="Generic"?T.value||"Credential":`${t} Credential`}),b=t=>{if(!t)return{};let e=t?.credentialSubject??t?._credential?.credentialSubject??t?.credential?.credentialSubject??t?.vc?.credentialSubject??t?.payload?.additionalClaims?.vc?.credentialSubject??t?.additionalClaims?.vc?.credentialSubject??{};if(e?.claims&&typeof e.claims=="object"&&(e={...e,...e.claims}),Object.keys(e).filter(a=>a!=="id"&&a!=="claims").length===0){const a={},D=["@context","type","id","issuer","issuanceDate","expirationDate","credentialSubject","proof","issuerId","credentialSubjectIds","_credential","credential","vc","jwt","payload"];for(const[k,_]of Object.entries(t))!D.includes(k)&&_!=null&&(a[k]=_);Object.keys(a).length>0&&(e={...e,...a})}return e},L=v(()=>{const t=m.value;if(!t)return"";const e=b(t);return e?.fullName??e?.holderName??e?.name??e?.customerName??t?.holder?.name??""}),E=v(()=>N.value?N.value:"Unknown"),U=v(()=>{const t=m.value??u.credential?.parsedDocument??u.credential?.document??u.credential;if(!t)return[];const e=b(t),i=t?.type??t?.vc?.type??t?._credential?.type??[],a=p.value?.kind==="invoice"||i.some(o=>o?.toLowerCase().includes("invoice"))||e?.invoiceId||e?.invoiceNumber,D=p.value?.kind==="quote"||i.some(o=>o?.toLowerCase().includes("quote"))||e?.quoteId||e?.quoteNumber;if(a){const o=[{label:"Invoice ID",value:e?.invoiceId??e?.invoiceNumber??e?.invoice_number},{label:"Cart Reference",value:e?.cartRef??e?.cartReference},{label:"Amount",value:w(e?.amount??e?.total??e?.totalAmount,e?.currency)},{label:"Currency",value:e?.currency?.toUpperCase()},{label:"Due Date",value:h(e?.dueDate??e?.due_date)},{label:"Issued",value:h(e?.timestamp??e?.issuedAt)}].filter(r=>r.value!=null&&r.value!==""&&r.value!=="—");return f.value?o:o.slice(0,4)}if(D){const o=[{label:"Quote ID",value:e?.quoteId??e?.quoteNumber??e?.quote_number},{label:"Customer",value:e?.customerName??e?.customer_name??e?.name},{label:"Total",value:w(e?.totalAmount??e?.total_amount??e?.amount,e?.currency)},{label:"Currency",value:e?.currency?.toUpperCase()},{label:"Valid Until",value:h(e?.validUntil??e?.valid_until)}].filter(r=>r.value!=null&&r.value!==""&&r.value!=="—");return f.value?o:o.slice(0,4)}if(p.value?.fields&&p.value.fields.length>0){const o=p.value.fields;return f.value?o:o.slice(0,4)}const k=["id","claims","type","@context"],_=[];for(const[o,r]of Object.entries(e)){if(k.includes(o)||r==null||typeof r=="object"&&!Array.isArray(r))continue;const z=o.replace(/([A-Z])/g," $1").replace(/_/g," ").trim().split(" ").map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" ");let O=r;typeof r=="string"&&r.match(/^\d{4}-\d{2}-\d{2}/)&&(O=h(r)),_.push({label:z,value:O})}return f.value?_:_.slice(0,4)}),w=(t,e)=>{if(t==null)return null;const i=e?.toUpperCase()??"USD";return typeof t=="number"?`${i} ${t.toFixed(2)}`:`${i} ${t}`},h=t=>{if(!t)return null;try{return new Date(t).toISOString().slice(0,10)}catch{return String(t)}},q=v(()=>{const t=m.value??u.credential?.parsedDocument??u.credential?.document??u.credential;if(!t)return[];const e=b(t),i=e?.items??e?.lines??e?.lineItems??[];return Array.isArray(i)?i.map(a=>({description:a?.description??a?.name??"—",amount:w(a?.amount??a?.price,e?.currency)??"—"})):[]}),J=v(()=>q.value.length>0&&(p.value?.kind==="invoice"||p.value?.kind==="quote")),$=v(()=>{const t=m.value??u.credential?.parsedDocument??u.credential?.document??u.credential;if(!t)return null;const e=b(t),i=e?.total??e?.estimatedTotal??e?.totalAmount??e?.amount,a=(e?.currency??"USD").toUpperCase();return i==null?null:typeof i=="number"?`${a} ${i.toFixed(2)}`:`${a} ${i}`}),R=t=>t==null?"—":Array.isArray(t)?t.map(e=>typeof e=="object"?JSON.stringify(e):String(e)).join(", "):typeof t=="boolean"?t?"Yes":"No":typeof t=="object"?JSON.stringify(t):String(t);return(t,e)=>(l(),n("div",{ref_key:"vcCardDiv",ref:K,class:Y(["credential-card",{"detail-view":f.value,"list-view":!f.value}])},[f.value?(l(),n(x,{key:1},[s("div",ce,[s("div",ue,[d(y)?(l(),n("img",{key:0,src:d(y),alt:"Issuer",class:"brand-logo"},null,8,de)):(l(),n("img",ve)),s("span",me,c(d(C)||"Credentis"),1)]),d(A)?(l(),n("div",pe,"Verified")):(l(),n("div",fe,"Expired"))]),s("div",_e,[s("h2",ye,c(V.value),1),s("div",be,c(L.value),1),s("div",he,[s("span",ke,"Issued "+c(E.value)+" · "+c(d(C)||"Unknown Issuer"),1),s("span",ge,c(S.value),1)])]),e[4]||(e[4]=s("div",{class:"card-divider"},null,-1)),U.value.length>0?(l(),n("div",je,[(l(!0),n(x,null,F(U.value,i=>(l(),n("div",{key:i.label,class:"claim-row"},[s("span",Ce,c(i.label),1),s("span",we,c(R(i.value)),1)]))),128))])):g("",!0),J.value?(l(),n("div",De,[e[1]||(e[1]=s("div",{class:"line-items-divider"},null,-1)),e[2]||(e[2]=s("div",{class:"line-items-header"},[s("span",null,"Description"),s("span",null,"Amount")],-1)),(l(!0),n(x,null,F(q.value,(i,a)=>(l(),n("div",{key:a,class:"line-item-row"},[s("span",Ie,c(i.description),1),s("span",xe,c(i.amount),1)]))),128)),e[3]||(e[3]=s("div",{class:"line-items-divider"},null,-1)),$.value?(l(),n("div",Ae,[e[0]||(e[0]=s("span",{class:"total-label"},"Total",-1)),s("span",Ne,c($.value),1)])):g("",!0)])):g("",!0),j.showId&&d(m)?.id?(l(),n("div",Se," ID: "+c(d(m).id),1)):g("",!0)],64)):(l(),n("div",X,[s("div",ee,[d(y)?(l(),n("img",{key:0,src:d(y),alt:"Issuer",class:"h-8 w-8 object-contain rounded-full bg-white/10 p-1"},null,8,te)):(l(),n("div",se,[H(d(W),{class:"h-5 w-5 text-white","aria-hidden":"true"})]))]),s("div",ie,[s("div",ne,c(V.value),1),s("div",le,c(d(C)||"Unknown Issuer"),1)]),s("div",ae,[d(A)?(l(),n("span",re,"Verified")):(l(),n("span",oe,"Expired"))])]))],2))}}),Oe=P(Ve,[["__scopeId","data-v-98d2d069"]]);export{Oe as V};
