import{k as z,m as q,l as G,i as W,u as Z,e as J,w as V,N as K,Z as ee,o as f,c as p,g as u,b as X,d as te,a as g,h as A,j as F,F as L,r as j,t as v}from"#entry";import{u as re,V as ie}from"./ChWA9fIA.js";import{L as ne}from"./Dhsf9hJ5.js";import{u as se}from"./CS6oTbIc.js";import{C as oe}from"./B-1inGnY.js";import{e as ae}from"./D75GOWRg.js";import"./D-q_bWm-.js";class le{add(e,r,n){if(typeof arguments[0]!="string")for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],r&&this[i][n?"unshift":"push"](r)},this)}run(e,r){this[e]=this[e]||[],this[e].forEach(function(n){n.call(r&&r.context?r.context:r,r)})}}class ce{constructor(e){this.jsep=e,this.registered={}}register(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(i=>{if(typeof i!="object"||!i.name||!i.init)throw new Error("Invalid JSEP plugin format");this.registered[i.name]||(i.init(this.jsep),this.registered[i.name]=i)})}}class s{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+s.version}static addUnaryOp(e){return s.max_unop_len=Math.max(e.length,s.max_unop_len),s.unary_ops[e]=1,s}static addBinaryOp(e,r,n){return s.max_binop_len=Math.max(e.length,s.max_binop_len),s.binary_ops[e]=r,n?s.right_associative.add(e):s.right_associative.delete(e),s}static addIdentifierChar(e){return s.additional_identifier_chars.add(e),s}static addLiteral(e,r){return s.literals[e]=r,s}static removeUnaryOp(e){return delete s.unary_ops[e],e.length===s.max_unop_len&&(s.max_unop_len=s.getMaxKeyLen(s.unary_ops)),s}static removeAllUnaryOps(){return s.unary_ops={},s.max_unop_len=0,s}static removeIdentifierChar(e){return s.additional_identifier_chars.delete(e),s}static removeBinaryOp(e){return delete s.binary_ops[e],e.length===s.max_binop_len&&(s.max_binop_len=s.getMaxKeyLen(s.binary_ops)),s.right_associative.delete(e),s}static removeAllBinaryOps(){return s.binary_ops={},s.max_binop_len=0,s}static removeLiteral(e){return delete s.literals[e],s}static removeAllLiterals(){return s.literals={},s}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new s(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(r=>r.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return s.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!s.binary_ops[String.fromCharCode(e)]||s.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return s.isIdentifierStart(e)||s.isDecimalDigit(e)}throwError(e){const r=new Error(e+" at character "+this.index);throw r.index=this.index,r.description=e,r}runHook(e,r){if(s.hooks[e]){const n={context:this,node:r};return s.hooks.run(e,n),n.node}return r}searchHook(e){if(s.hooks[e]){const r={context:this};return s.hooks[e].find(function(n){return n.call(r.context,r),r.node}),r.node}}gobbleSpaces(){let e=this.code;for(;e===s.SPACE_CODE||e===s.TAB_CODE||e===s.LF_CODE||e===s.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const e=this.gobbleExpressions(),r=e.length===1?e[0]:{type:s.COMPOUND,body:e};return this.runHook("after-all",r)}gobbleExpressions(e){let r=[],n,i;for(;this.index<this.expr.length;)if(n=this.code,n===s.SEMCOL_CODE||n===s.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())r.push(i);else if(this.index<this.expr.length){if(n===e)break;this.throwError('Unexpected "'+this.char+'"')}return r}gobbleExpression(){const e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,s.max_binop_len),r=e.length;for(;r>0;){if(s.binary_ops.hasOwnProperty(e)&&(!s.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!s.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=r,e;e=e.substr(0,--r)}return!1}gobbleBinaryExpression(){let e,r,n,i,o,a,d,h,c;if(a=this.gobbleToken(),!a||(r=this.gobbleBinaryOp(),!r))return a;for(o={value:r,prec:s.binaryPrecedence(r),right_a:s.right_associative.has(r)},d=this.gobbleToken(),d||this.throwError("Expected expression after "+r),i=[a,o,d];r=this.gobbleBinaryOp();){if(n=s.binaryPrecedence(r),n===0){this.index-=r.length;break}o={value:r,prec:n,right_a:s.right_associative.has(r)},c=r;const y=m=>o.right_a&&m.right_a?n>m.prec:n<=m.prec;for(;i.length>2&&y(i[i.length-2]);)d=i.pop(),r=i.pop().value,a=i.pop(),e={type:s.BINARY_EXP,operator:r,left:a,right:d},i.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+c),i.push(o,e)}for(h=i.length-1,e=i[h];h>1;)e={type:s.BINARY_EXP,operator:i[h-1].value,left:i[h-2],right:e},h-=2;return e}gobbleToken(){let e,r,n,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(e=this.code,s.isDecimalDigit(e)||e===s.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===s.SQUOTE_CODE||e===s.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(e===s.OBRACK_CODE)i=this.gobbleArray();else{for(r=this.expr.substr(this.index,s.max_unop_len),n=r.length;n>0;){if(s.unary_ops.hasOwnProperty(r)&&(!s.isIdentifierStart(this.code)||this.index+r.length<this.expr.length&&!s.isIdentifierPart(this.expr.charCodeAt(this.index+r.length)))){this.index+=n;const o=this.gobbleToken();return o||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:s.UNARY_EXP,operator:r,argument:o,prefix:!0})}r=r.substr(0,--n)}s.isIdentifierStart(e)?(i=this.gobbleIdentifier(),s.literals.hasOwnProperty(i.name)?i={type:s.LITERAL,value:s.literals[i.name],raw:i.name}:i.name===s.this_str&&(i={type:s.THIS_EXP})):e===s.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let r=this.code;for(;r===s.PERIOD_CODE||r===s.OBRACK_CODE||r===s.OPAREN_CODE||r===s.QUMARK_CODE;){let n;if(r===s.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==s.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),r=this.code}this.index++,r===s.OBRACK_CODE?(e={type:s.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},e.property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),r=this.code,r!==s.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):r===s.OPAREN_CODE?e={type:s.CALL_EXP,arguments:this.gobbleArguments(s.CPAREN_CODE),callee:e}:(r===s.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),e={type:s.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),n&&(e.optional=!0),this.gobbleSpaces(),r=this.code}return e}gobbleNumericLiteral(){let e="",r,n;for(;s.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===s.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);s.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(r=this.char,r==="e"||r==="E"){for(e+=this.expr.charAt(this.index++),r=this.char,(r==="+"||r==="-")&&(e+=this.expr.charAt(this.index++));s.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);s.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return n=this.code,s.isIdentifierStart(n)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(n===s.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===s.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:s.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="";const r=this.index,n=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let o=this.expr.charAt(this.index++);if(o===n){i=!0;break}else if(o==="\\")switch(o=this.expr.charAt(this.index++),o){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=o}else e+=o}return i||this.throwError('Unclosed quote after "'+e+'"'),{type:s.LITERAL,value:e,raw:this.expr.substring(r,this.index)}}gobbleIdentifier(){let e=this.code,r=this.index;for(s.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,s.isIdentifierPart(e));)this.index++;return{type:s.IDENTIFIER,name:this.expr.slice(r,this.index)}}gobbleArguments(e){const r=[];let n=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let o=this.code;if(o===e){n=!0,this.index++,e===s.CPAREN_CODE&&i&&i>=r.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(o===s.COMMA_CODE){if(this.index++,i++,i!==r.length){if(e===s.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===s.CBRACK_CODE)for(let a=r.length;a<i;a++)r.push(null)}}else if(r.length!==i&&i!==0)this.throwError("Expected comma");else{const a=this.gobbleExpression();(!a||a.type===s.COMPOUND)&&this.throwError("Expected comma"),r.push(a)}}return n||this.throwError("Expected "+String.fromCharCode(e)),r}gobbleGroup(){this.index++;let e=this.gobbleExpressions(s.CPAREN_CODE);if(this.code===s.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:s.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:s.ARRAY_EXP,elements:this.gobbleArguments(s.CBRACK_CODE)}}}const he=new le;Object.assign(s,{hooks:he,plugins:new ce(s),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});s.max_unop_len=s.getMaxKeyLen(s.unary_ops);s.max_binop_len=s.getMaxKeyLen(s.binary_ops);const D=t=>new s(t).parse(),ue=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(s).filter(t=>!ue.includes(t)&&D[t]===void 0).forEach(t=>{D[t]=s[t]});D.Jsep=s;const de="ConditionalExpression";var fe={name:"ternary",init(t){t.hooks.add("after-expression",function(r){if(r.node&&this.code===t.QUMARK_CODE){this.index++;const n=r.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;const o=this.gobbleExpression();if(o||this.throwError("Expected expression"),r.node={type:de,test:n,consequent:i,alternate:o},n.operator&&t.binary_ops[n.operator]<=.9){let a=n;for(;a.right.operator&&t.binary_ops[a.right.operator]<=.9;)a=a.right;r.node.test=a.right,a.right=r.node,r.node=n}}else this.throwError("Expected :")}})}};D.plugins.register(fe);const Q=47,pe=92;var ge={name:"regex",init(t){t.hooks.add("gobble-token",function(r){if(this.code===Q){const n=++this.index;let i=!1;for(;this.index<this.expr.length;){if(this.code===Q&&!i){const o=this.expr.slice(n,this.index);let a="";for(;++this.index<this.expr.length;){const h=this.code;if(h>=97&&h<=122||h>=65&&h<=90||h>=48&&h<=57)a+=this.char;else break}let d;try{d=new RegExp(o,a)}catch(h){this.throwError(h.message)}return r.node={type:t.LITERAL,value:d,raw:this.expr.slice(n-1,this.index)},r.node=this.gobbleTokenProperty(r.node),r.node}this.code===t.OBRACK_CODE?i=!0:i&&this.code===t.CBRACK_CODE&&(i=!1),this.index+=this.code===pe?2:1}this.throwError("Unclosed Regex")}})}};const M=43,ye=45,T={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[M,ye],assignmentPrecedence:.9,init(t){const e=[t.IDENTIFIER,t.MEMBER_EXP];T.assignmentOperators.forEach(n=>t.addBinaryOp(n,T.assignmentPrecedence,!0)),t.hooks.add("gobble-token",function(i){const o=this.code;T.updateOperators.some(a=>a===o&&a===this.expr.charCodeAt(this.index+1))&&(this.index+=2,i.node={type:"UpdateExpression",operator:o===M?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},(!i.node.argument||!e.includes(i.node.argument.type))&&this.throwError(`Unexpected ${i.node.operator}`))}),t.hooks.add("after-token",function(i){if(i.node){const o=this.code;T.updateOperators.some(a=>a===o&&a===this.expr.charCodeAt(this.index+1))&&(e.includes(i.node.type)||this.throwError(`Unexpected ${i.node.operator}`),this.index+=2,i.node={type:"UpdateExpression",operator:o===M?"++":"--",argument:i.node,prefix:!1})}}),t.hooks.add("after-expression",function(i){i.node&&r(i.node)});function r(n){T.assignmentOperators.has(n.operator)?(n.type="AssignmentExpression",r(n.left),r(n.right)):n.operator||Object.values(n).forEach(i=>{i&&typeof i=="object"&&r(i)})}}};D.plugins.register(ge,T);D.addUnaryOp("typeof");D.addLiteral("null",null);D.addLiteral("undefined",void 0);const be=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),E={evalAst(t,e){switch(t.type){case"BinaryExpression":case"LogicalExpression":return E.evalBinaryExpression(t,e);case"Compound":return E.evalCompound(t,e);case"ConditionalExpression":return E.evalConditionalExpression(t,e);case"Identifier":return E.evalIdentifier(t,e);case"Literal":return E.evalLiteral(t,e);case"MemberExpression":return E.evalMemberExpression(t,e);case"UnaryExpression":return E.evalUnaryExpression(t,e);case"ArrayExpression":return E.evalArrayExpression(t,e);case"CallExpression":return E.evalCallExpression(t,e);case"AssignmentExpression":return E.evalAssignmentExpression(t,e);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression(t,e){return{"||":(n,i)=>n||i(),"&&":(n,i)=>n&&i(),"|":(n,i)=>n|i(),"^":(n,i)=>n^i(),"&":(n,i)=>n&i(),"==":(n,i)=>n==i(),"!=":(n,i)=>n!=i(),"===":(n,i)=>n===i(),"!==":(n,i)=>n!==i(),"<":(n,i)=>n<i(),">":(n,i)=>n>i(),"<=":(n,i)=>n<=i(),">=":(n,i)=>n>=i(),"<<":(n,i)=>n<<i(),">>":(n,i)=>n>>i(),">>>":(n,i)=>n>>>i(),"+":(n,i)=>n+i(),"-":(n,i)=>n-i(),"*":(n,i)=>n*i(),"/":(n,i)=>n/i(),"%":(n,i)=>n%i()}[t.operator](E.evalAst(t.left,e),()=>E.evalAst(t.right,e))},evalCompound(t,e){let r;for(let n=0;n<t.body.length;n++){t.body[n].type==="Identifier"&&["var","let","const"].includes(t.body[n].name)&&t.body[n+1]&&t.body[n+1].type==="AssignmentExpression"&&(n+=1);const i=t.body[n];r=E.evalAst(i,e)}return r},evalConditionalExpression(t,e){return E.evalAst(t.test,e)?E.evalAst(t.consequent,e):E.evalAst(t.alternate,e)},evalIdentifier(t,e){if(Object.hasOwn(e,t.name))return e[t.name];throw ReferenceError(`${t.name} is not defined`)},evalLiteral(t){return t.value},evalMemberExpression(t,e){const r=String(t.computed?E.evalAst(t.property):t.property.name),n=E.evalAst(t.object,e);if(n==null)throw TypeError(`Cannot read properties of ${n} (reading '${r}')`);if(!Object.hasOwn(n,r)&&be.has(r))throw TypeError(`Cannot read properties of ${n} (reading '${r}')`);const i=n[r];return typeof i=="function"?i.bind(n):i},evalUnaryExpression(t,e){return{"-":n=>-E.evalAst(n,e),"!":n=>!E.evalAst(n,e),"~":n=>~E.evalAst(n,e),"+":n=>+E.evalAst(n,e),typeof:n=>typeof E.evalAst(n,e)}[t.operator](t.argument)},evalArrayExpression(t,e){return t.elements.map(r=>E.evalAst(r,e))},evalCallExpression(t,e){const r=t.arguments.map(i=>E.evalAst(i,e));return E.evalAst(t.callee,e)(...r)},evalAssignmentExpression(t,e){if(t.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");const r=t.left.name,n=E.evalAst(t.right,e);return e[r]=n,e[r]}};class xe{constructor(e){this.code=e,this.ast=D(this.code)}runInNewContext(e){const r=Object.assign(Object.create(null),e);return E.evalAst(this.ast,r)}}function R(t,e){return t=t.slice(),t.push(e),t}function B(t,e){return e=e.slice(),e.unshift(t),e}class Ee extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}}function b(t,e,r,n,i){if(!(this instanceof b))try{return new b(t,e,r,n,i)}catch(a){if(!a.avoidNew)throw a;return a.value}typeof t=="string"&&(i=n,n=r,r=e,e=t,t=null);const o=t&&typeof t=="object";if(t=t||{},this.json=t.json||r,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=Object.hasOwn(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.eval=t.eval===void 0?"safe":t.eval,this.ignoreEvalErrors=typeof t.ignoreEvalErrors>"u"?!1:t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||n||null,this.otherTypeCallback=t.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){const a={path:o?t.path:e};o?"json"in t&&(a.json=t.json):a.json=r;const d=this.evaluate(a);if(!d||typeof d!="object")throw new Ee(d);return d}}b.prototype.evaluate=function(t,e,r,n){let i=this.parent,o=this.parentProperty,{flatten:a,wrap:d}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&typeof t=="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),a=Object.hasOwn(t,"flatten")?t.flatten:a,this.currResultType=Object.hasOwn(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Object.hasOwn(t,"sandbox")?t.sandbox:this.currSandbox,d=Object.hasOwn(t,"wrap")?t.wrap:d,this.currEval=Object.hasOwn(t,"eval")?t.eval:this.currEval,r=Object.hasOwn(t,"callback")?t.callback:r,this.currOtherTypeCallback=Object.hasOwn(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,i=Object.hasOwn(t,"parent")?t.parent:i,o=Object.hasOwn(t,"parentProperty")?t.parentProperty:o,t=t.path}if(i=i||null,o=o||null,Array.isArray(t)&&(t=b.toPathString(t)),!t&&t!==""||!e)return;const h=b.toPathArray(t);h[0]==="$"&&h.length>1&&h.shift(),this._hasParentSelector=null;const c=this._trace(h,e,["$"],i,o,r).filter(function(y){return y&&!y.isParentSelector});return c.length?!d&&c.length===1&&!c[0].hasArrExpr?this._getPreferredOutput(c[0]):c.reduce((y,m)=>{const C=this._getPreferredOutput(m);return a&&Array.isArray(C)?y=y.concat(C):y.push(C),y},[]):d?[]:void 0};b.prototype._getPreferredOutput=function(t){const e=this.currResultType;switch(e){case"all":{const r=Array.isArray(t.path)?t.path:b.toPathArray(t.path);return t.pointer=b.toPointer(r),t.path=typeof t.path=="string"?t.path:b.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return b.toPathString(t[e]);case"pointer":return b.toPointer(t.path);default:throw new TypeError("Unknown result type")}};b.prototype._handleCallback=function(t,e,r){if(e){const n=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:b.toPathString(t.path),e(n,r,t)}};b.prototype._trace=function(t,e,r,n,i,o,a,d){let h;if(!t.length)return h={path:r,value:e,parent:n,parentProperty:i,hasArrExpr:a},this._handleCallback(h,o,"value"),h;const c=t[0],y=t.slice(1),m=[];function C(l){Array.isArray(l)?l.forEach(w=>{m.push(w)}):m.push(l)}if((typeof c!="string"||d)&&e&&Object.hasOwn(e,c))C(this._trace(y,e[c],R(r,c),e,c,o,a));else if(c==="*")this._walk(e,l=>{C(this._trace(y,e[l],R(r,l),e,l,o,!0,!0))});else if(c==="..")C(this._trace(y,e,r,n,i,o,a)),this._walk(e,l=>{typeof e[l]=="object"&&C(this._trace(t.slice(),e[l],R(r,l),e,l,o,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:y,isParentSelector:!0};if(c==="~")return h={path:R(r,c),value:i,parent:n,parentProperty:null},this._handleCallback(h,o,"property"),h;if(c==="$")C(this._trace(y,e,r,null,null,o,a));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(c))C(this._slice(c,y,e,r,n,i,o));else if(c.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const l=c.replace(/^\?\((.*?)\)$/u,"$1"),w=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(l);w?this._walk(e,O=>{const I=[w[2]],P=w[1]?e[O][w[1]]:e[O];this._trace(I,P,r,n,i,o,!0).length>0&&C(this._trace(y,e[O],R(r,O),e,O,o,!0))}):this._walk(e,O=>{this._eval(l,e[O],O,r,n,i)&&C(this._trace(y,e[O],R(r,O),e,O,o,!0))})}else if(c[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");C(this._trace(B(this._eval(c,e,r.at(-1),r.slice(0,-1),n,i),y),e,r,n,i,o,a))}else if(c[0]==="@"){let l=!1;const w=c.slice(1,-2);switch(w){case"scalar":(!e||!["object","function"].includes(typeof e))&&(l=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===w&&(l=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(l=!0);break;case"number":Number.isFinite(e)&&(l=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(l=!0);break;case"object":e&&typeof e===w&&(l=!0);break;case"array":Array.isArray(e)&&(l=!0);break;case"other":l=this.currOtherTypeCallback(e,r,n,i);break;case"null":e===null&&(l=!0);break;default:throw new TypeError("Unknown value type "+w)}if(l)return h={path:r,value:e,parent:n,parentProperty:i},this._handleCallback(h,o,"value"),h}else if(c[0]==="`"&&e&&Object.hasOwn(e,c.slice(1))){const l=c.slice(1);C(this._trace(y,e[l],R(r,l),e,l,o,a,!0))}else if(c.includes(",")){const l=c.split(",");for(const w of l)C(this._trace(B(w,y),e,r,n,i,o,!0))}else!d&&e&&Object.hasOwn(e,c)&&C(this._trace(y,e[c],R(r,c),e,c,o,a,!0))}if(this._hasParentSelector)for(let l=0;l<m.length;l++){const w=m[l];if(w&&w.isParentSelector){const O=this._trace(w.expr,e,w.path,n,i,o,a);if(Array.isArray(O)){m[l]=O[0];const I=O.length;for(let P=1;P<I;P++)l++,m.splice(l,0,O[P])}else m[l]=O}}return m};b.prototype._walk=function(t,e){if(Array.isArray(t)){const r=t.length;for(let n=0;n<r;n++)e(n)}else t&&typeof t=="object"&&Object.keys(t).forEach(r=>{e(r)})};b.prototype._slice=function(t,e,r,n,i,o,a){if(!Array.isArray(r))return;const d=r.length,h=t.split(":"),c=h[2]&&Number.parseInt(h[2])||1;let y=h[0]&&Number.parseInt(h[0])||0,m=h[1]&&Number.parseInt(h[1])||d;y=y<0?Math.max(0,y+d):Math.min(d,y),m=m<0?Math.max(0,m+d):Math.min(d,m);const C=[];for(let l=y;l<m;l+=c)this._trace(B(l,e),r,n,i,o,a,!0).forEach(O=>{C.push(O)});return C};b.prototype._eval=function(t,e,r,n,i,o){this.currSandbox._$_parentProperty=o,this.currSandbox._$_parent=i,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;const a=t.includes("@path");a&&(this.currSandbox._$_path=b.toPathString(n.concat([r])));const d=this.currEval+"Script:"+t;if(!b.cache[d]){let h=t.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(a&&(h=h.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)b.cache[d]=new this.safeVm.Script(h);else if(this.currEval==="native")b.cache[d]=new this.vm.Script(h);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const c=this.currEval;b.cache[d]=new c(h)}else if(typeof this.currEval=="function")b.cache[d]={runInNewContext:c=>this.currEval(h,c)};else throw new TypeError(`Unknown "eval" property "${this.currEval}"`)}try{return b.cache[d].runInNewContext(this.currSandbox)}catch(h){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+h.message+": "+t)}};b.cache={};b.toPathString=function(t){const e=t,r=e.length;let n="$";for(let i=1;i<r;i++)/^(~|\^|@.*?\(\))$/u.test(e[i])||(n+=/^[0-9*]+$/u.test(e[i])?"["+e[i]+"]":"['"+e[i]+"']");return n};b.toPointer=function(t){const e=t,r=e.length;let n="";for(let i=1;i<r;i++)/^(~|\^|@.*?\(\))$/u.test(e[i])||(n+="/"+e[i].toString().replaceAll("~","~0").replaceAll("/","~1"));return n};b.toPathArray=function(t){const{cache:e}=b;if(e[t])return e[t].concat();const r=[],i=t.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(o,a){return"[#"+(r.push(a)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(o,a){return"['"+a.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(o,a){return";"+a.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(o){const a=o.match(/#(\d+)/u);return!a||!a[1]?o:r[a[1]]});return e[t]=i,e[t].concat()};b.prototype.safeVm={Script:xe};const me=function(t,e,r){const n=t.length;for(let i=0;i<n;i++){const o=t[i];r(o)&&e.push(t.splice(i--,1)[0])}};class we{constructor(e){this.code=e}runInNewContext(e){let r=this.code;const n=Object.keys(e),i=[];me(n,i,c=>typeof e[c]=="function");const o=n.map(c=>e[c]);r=i.reduce((c,y)=>{let m=e[y].toString();return/function/u.test(m)||(m="function "+m),"var "+y+"="+m+";"+c},"")+r,!/(['"])use strict\1/u.test(r)&&!n.includes("arguments")&&(r="var arguments = undefined;"+r),r=r.replace(/;\s*$/u,"");const d=r.lastIndexOf(";"),h=d!==-1?r.slice(0,d+1)+" return "+r.slice(d+1):" return "+r;return new Function(...n,h)(...o)}}b.prototype.vm={Script:we};const Oe={key:0,class:"flex justify-center items-center h-screen"},Ce={key:1},_e={class:"flex justify-between items-center sm:hidden"},Ae={key:0,class:"my-10 sm:flex justify-center"},ve={class:"hidden sm:block px-4 py-6 rounded-xl",style:{"backdrop-filter":"blur(20px) saturate(200%)",background:"linear-gradient(135deg, rgba(208,230,243,0.92), rgba(136,196,227,0.85))",border:"1px solid rgba(255,255,255,0.35)","box-shadow":"0 8px 32px rgba(33,136,202,0.25)"}},Se={key:0,class:"w-full border-gray-200 my-2"},ke={key:1,class:"text-gray-500 font-bold mt-4 mb-2"},Pe=["src"],De={class:"flex mt-3"},Ie={class:"text-gray-500 w-sm"},Re={class:"text-gray-500 font-bold w-2xl"},Te={key:3},Ne={class:"flex mt-3"},Le={class:"text-gray-500 w-sm"},je={class:"text-gray-500 font-bold w-2xl"},$e={key:4,class:"w-full border-gray-200 mb-2 mt-8"},Ue={key:5,class:"text-gray-500 font-bold mt-4 mb-8"},Me={key:6,class:"flex mt-2"},Be={class:"text-gray-500 font-bold w-2xl"},He={key:7,class:"flex mt-2 mb-8"},Ve={class:"text-gray-500 font-bold w-2xl overflow-scroll"},Ke={key:8,class:"w-full border-gray-200 mb-2 mt-8"},Xe={key:9,class:"text-gray-500 font-bold mt-4 mb-8"},Fe={key:10},Qe={class:"flex mt-2"},Ye={class:"text-gray-500 w-sm"},ze={class:"text-gray-500 font-bold overflow-scroll w-2xl"},qe={class:"flex justify-between my-6"},Ge={key:0,class:"text-gray-500"},We={key:1,class:"text-gray-500"},Ze={key:2,class:"text-gray-500"},Je={key:3,class:"text-gray-500"},et={class:"flex justify-between my-16"},tt={key:11,class:"bg-gray-100 p-4 rounded-xl overflow-auto"},rt={class:"text-xs"},it={key:1,class:"px-4 py-6 rounded-xl sm:hidden",style:{"backdrop-filter":"blur(20px) saturate(200%)",background:"linear-gradient(135deg, rgba(208,230,243,0.92), rgba(136,196,227,0.85))",border:"1px solid rgba(255,255,255,0.35)","box-shadow":"0 8px 32px rgba(33,136,202,0.25)"}},nt={key:0},st=["src"],ot={class:"text-gray-500"},at={class:"text-black"},lt={key:0,class:"w-full border-gray-200 my-2"},ct={key:1},ht={class:"text-gray-500"},ut={class:"text-black"},dt={key:0,class:"w-full border-gray-200 my-2"},wt=z({__name:"[credentialId]",async setup(t){let e,r;const n=q(),i=ee(),o=n.params.wallet,a=n.params.credentialId,d=se(),h=G(!1),{data:c,pending:y,refresh:m,error:C}=([e,r]=W(()=>K(`/wallet-api/wallet/${d.value}/credentials/${encodeURIComponent(a)}`,"$buEG75oS09")),e=await e,r(),e),{jwtJson:l,disclosures:w,issuerName:O,issuerDid:I,issuanceDate:P,expirationDate:U}=re(c),S=ae(async()=>{if(l.value){const{data:$}=await K(`${i.public.credentialsRepositoryUrl}/api/manifest/${l.value?.type[l.value?.type.length-1]}`,{transform:x=>{let _=JSON.parse(JSON.stringify(x));return x.image&&(_={..._,image:b({path:x.image,json:l.value})[0]??w.value?.find(k=>k[1]===x.image.split(".").pop())?.[2]}),x.claims&&(_={..._,claims:Object.fromEntries(Object.entries(x?.claims).map(([k,N])=>[k,b({path:N,json:l.value})[0]??w.value?.find(Y=>Y[1]===N.split(".").pop())?.[2]]))}),_}},"$z3iVMJ2W_J");return $.value}return null});async function H(){await $fetch(`/wallet-api/wallet/${d.value}/credentials/${encodeURIComponent(a)}?permanent=true`,{method:"DELETE"}),await F({path:`/wallet/${d.value}`})}return Z({title:"View credential - Credentis"}),($,x)=>(f(),J(oe,null,{default:V(()=>[u(y)?(f(),p("div",Oe,[X(ne,null,{default:V(()=>[...x[2]||(x[2]=[te("Loading credential...",-1)])]),_:1})])):(f(),p("div",Ce,[g("div",_e,[g("div",{class:"cursor-pointer bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-black text-xs font-bold",onClick:x[0]||(x[0]=_=>("navigateTo"in $?$.navigateTo:u(F))({path:`/wallet/${u(o)}`}))}," X "),g("div",{class:"cursor-pointer bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center text-black text-xs font-bold",onClick:H},[...x[3]||(x[3]=[g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[g("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),g("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})],-1)])])]),u(c)?(f(),p("div",Ae,[X(ie,{credential:u(c),isDetailView:!0},null,8,["credential"])])):A("",!0),g("div",ve,[u(S)?(f(),p("hr",Se)):A("",!0),u(S)?(f(),p("div",ke," Subject Info ")):A("",!0),u(S)?.image?(f(),p("img",{key:2,src:u(S)?.image,alt:"User Avatar",class:"h-28 mb-4 rounded-md"},null,8,Pe)):A("",!0),(f(!0),p(L,null,j(u(S)?.claims,(_,k,N)=>(f(),p("div",{key:k},[g("div",De,[g("div",Ie,v(k),1),g("div",Re,v(_),1)])]))),128)),u(c)?.format==="mso_mdoc"?(f(),p("div",Te,[x[4]||(x[4]=g("hr",{class:"w-full border-gray-200 my-2"},null,-1)),x[5]||(x[5]=g("div",{class:"text-gray-500 font-bold mt-4 mb-8"},"Subject Info",-1)),(f(!0),p(L,null,j(u(l)?.issuerSigned?.nameSpaces[Object.keys(u(l)?.issuerSigned?.nameSpaces)[0]],_=>(f(),p("div",null,[g("div",Ne,[g("div",Le,v(_.elementIdentifier),1),g("div",je,v(_.elementValue),1)])]))),256))])):A("",!0),u(O)||u(I)?(f(),p("hr",$e)):A("",!0),u(O)||u(I)?(f(),p("div",Ue," Issuer ")):A("",!0),u(O)?(f(),p("div",Me,[x[6]||(x[6]=g("div",{class:"text-gray-500 w-sm"},"Name",-1)),g("div",Be,v(u(O)),1)])):A("",!0),u(I)?(f(),p("div",He,[x[7]||(x[7]=g("div",{class:"text-gray-500 w-sm"},"DID",-1)),g("div",Ve,v(u(I)),1)])):A("",!0),u(w)?(f(),p("hr",Ke)):A("",!0),u(w)?(f(),p("div",Xe," Selectively disclosable attributes ")):A("",!0),u(w)?(f(),p("div",Fe,[(f(!0),p(L,null,j(u(w),_=>(f(),p("div",null,[g("div",Qe,[g("div",Ye,v(_[1]),1),g("div",ze,v(_[2]),1)])]))),256))])):A("",!0),x[8]||(x[8]=g("hr",{class:"w-full border-gray-200 my-2"},null,-1)),g("div",qe,[u(U)?(f(),p("div",Ge," Valid through "+v(u(P)?.replace(/-/g,"."))+" - "+v(u(U).replace(/-/g,".")),1)):(f(),p("div",We,"No expiration date")),u(P)?(f(),p("div",Ze," Issued "+v(u(P)?.replace(/-/g,".")),1)):(f(),p("div",Je,"No issuance date"))]),g("div",et,[g("div",{class:"text-blue-500 cursor-pointer underline",onClick:x[1]||(x[1]=_=>h.value=!h.value)},v(h.value?"Hide":"Show")+" Credential JSON ",1),g("div",{class:"text-red-500 cursor-pointer underline",onClick:H}," Delete Credential ")]),h.value?(f(),p("div",tt,[g("pre",rt,v(u(l)),1)])):A("",!0)]),u(S)||u(c)?.format==="mso_mdoc"?(f(),p("div",it,[u(S)?(f(),p("div",nt,[u(S)?.image?(f(),p("img",{key:0,src:u(S)?.image,alt:"User Avatar",class:"h-28 mb-4 rounded-md"},null,8,st)):A("",!0),x[9]||(x[9]=g("div",{class:"text-gray-600 font-bold mb-4"},"Credential Details",-1)),(f(!0),p(L,null,j(u(S).claims,(_,k,N)=>(f(),p("div",{key:k},[g("div",ot,v(k),1),g("div",at,v(_),1),N!==Object.keys(u(S).claims).length-1?(f(),p("hr",lt)):A("",!0)]))),128))])):A("",!0),u(c)?.format==="mso_mdoc"?(f(),p("div",ct,[x[10]||(x[10]=g("div",{class:"text-gray-600 font-bold mb-4"},"Credential Details",-1)),(f(!0),p(L,null,j(u(l)?.issuerSigned?.nameSpaces[Object.keys(u(l)?.issuerSigned?.nameSpaces)[0]],(_,k)=>(f(),p("div",null,[g("div",ht,v(_.elementIdentifier),1),g("div",ut,v(_.elementValue),1),k!==u(l)?.issuerSigned?.nameSpaces[Object.keys(u(l)?.issuerSigned?.nameSpaces)[0]].length-1?(f(),p("hr",dt)):A("",!0)]))),256))])):A("",!0)])):A("",!0)]))]),_:1}))}});export{wt as default};
