import{C as _}from"./CPWQvqDN.js";import{_ as p}from"./VP2HrRfh.js";import{L as h}from"./BwzTearg.js";import{s as w,l as g}from"./DGaPg-gW.js";import{h as q,j as R,e as U,n as x,f as l,w as m,o,g as n,d as y}from"#entry";import"./BPxGWsFk.js";import"./BAsolvdk.js";const T=q({__name:"initiateIssuance",async setup(C){let a,r;const t=new URL("http://example.invalid"+R().fullPath).search;console.log("queryRequest: ",t);const i=new URLSearchParams(t),c=(i.has("credential_offer_uri")||i.has("?credential_offer_uri")?"openid-credential-offer://":"openid-initiate-issuance://")+(t.startsWith("?")?t:"?"+t);console.log("walletRequestUrl: ",c);const u=btoa(c);console.log("encodedWalletRequestUrl: ",u);const e=([a,r]=U(()=>g()),a=await a,r(),a)?.value?.wallets,f=s=>`/wallet/${s.id}/exchange/issuance?request=${u}`;if(e&&e.length==1){const s=e[0];w(s.id,void 0),x(f(e[0]))}return(s,d)=>(o(),l(_,null,{default:m(()=>[n(e)&&n(e).length>1?(o(),l(p,{key:0,wallets:n(e),"use-url":f},null,8,["wallets"])):(o(),l(h,{key:1},{default:m(()=>[...d[0]||(d[0]=[y("Loading wallets...",-1)])]),_:1}))]),_:1}))}});export{T as default};
