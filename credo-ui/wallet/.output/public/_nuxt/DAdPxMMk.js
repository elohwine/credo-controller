import{C as f}from"./CGoOfd1o.js";import{_ as p}from"./Cf7xgmPg.js";import{L as w}from"./_ObbXfpD.js";import{f as _,e as q}from"./6yF6Fmpd.js";import{s as g,l as x}from"./CbphGzgi.js";import{k as R,m as h,i as y,j as k,e as s,w as d,o as a,g as l,d as C}from"#entry";import"./fvw6v6Xq.js";const P=R({__name:"initiatePresentation",async setup(U){let t,n;const m=new URL("http://example.invalid"+h().fullPath).search;console.log("queryRequest: ",m);let i=encodeURI(decodeURI(_("openid://"+window.location.search)));console.log("Fixed request: ",i);const r=q(i);console.log("Encoded request: ",r);const e=([t,n]=y(()=>x()),t=await t,n(),t)?.value?.wallets,c=o=>`/wallet/${o.id}/exchange/presentation?request=${r}`;if(e&&e.length==1){const o=e[0];g(o.id,void 0),k(c(e[0]))}return(o,u)=>(a(),s(f,null,{default:d(()=>[l(e)&&l(e).length>1?(a(),s(p,{key:0,wallets:l(e),"use-url":c},null,8,["wallets"])):(a(),s(w,{key:1},{default:d(()=>[...u[0]||(u[0]=[C("Loading wallets...",-1)])]),_:1}))]),_:1}))}});export{P as default};
